{"ast":null,"code":"import{FETCH_REVIEWS,REVIEWS_LOADING,REVIEWS_LOADED,ADD_REVIEW,ERROR_REVIEW}from\"./types\";import axios from'axios';import{returnErrors}from\"./errorActions\";var x=0,y;export var fetchReviews=function fetchReviews(){return function(dispatch){if(x===0){dispatch({type:REVIEWS_LOADING});}axios.get('https://react-native-serverjs.herokuapp.com/api/fetchReviews').then(function(reviews){if(x===0){dispatch({type:REVIEWS_LOADED});dispatch({type:FETCH_REVIEWS,payload:reviews.data});x=1;y=reviews.data.length;}else if(y!==reviews.data.length){console.log(y);axios.get('https://react-native-serverjs.herokuapp.com/api/fetchReviews').then(function(reviews){dispatch({type:FETCH_REVIEWS,payload:reviews.data});});y=reviews.data.length;}});};};export var addReview=function addReview(review){return function(dispatch){dispatch({type:ADD_REVIEW});axios({method:'post',url:'https://react-native-serverjs.herokuapp.com/api/addReview',data:review}).then(function(review){console.log(review.data);}).catch(function(err){console.log(err.response.status);dispatch(returnErrors(err.response.data,err.response.status,'ERROR_REVIEW'));});};};","map":{"version":3,"sources":["E:/react-native/client/src/actions/reviewsActions.js"],"names":["FETCH_REVIEWS","REVIEWS_LOADING","REVIEWS_LOADED","ADD_REVIEW","ERROR_REVIEW","axios","returnErrors","x","y","fetchReviews","dispatch","type","get","then","reviews","payload","data","length","console","log","addReview","review","method","url","catch","err","response","status"],"mappings":"AAAA,OAASA,aAAT,CAAwBC,eAAxB,CAAyCC,cAAzC,CAAyDC,UAAzD,CAAqEC,YAArE,eACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,YAAR,sBAEA,GAAIC,CAAAA,CAAC,CAAC,CAAN,CAAQC,CAAR,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAM,UAAAC,QAAQ,CAAI,CAC1C,GAAGH,CAAC,GAAG,CAAP,CAAS,CACPG,QAAQ,CAAC,CAAEC,IAAI,CAACV,eAAP,CAAD,CAAR,CACD,CAGDI,KAAK,CAACO,GAAN,CAAU,8DAAV,EACGC,IADH,CACQ,SAAAC,OAAO,CAAI,CACf,GAAGP,CAAC,GAAG,CAAP,CAAS,CAELG,QAAQ,CAAC,CAAEC,IAAI,CAACT,cAAP,CAAD,CAAR,CACAQ,QAAQ,CAAC,CACLC,IAAI,CAACX,aADA,CAELe,OAAO,CAACD,OAAO,CAACE,IAFX,CAAD,CAAR,CAIAT,CAAC,CAAC,CAAF,CACAC,CAAC,CAACM,OAAO,CAACE,IAAR,CAAaC,MAAf,CACH,CATD,IASM,IAAGT,CAAC,GAAKM,OAAO,CAACE,IAAR,CAAaC,MAAtB,CAA6B,CACjCC,OAAO,CAACC,GAAR,CAAYX,CAAZ,EAEQH,KAAK,CAACO,GAAN,CAAU,8DAAV,EACGC,IADH,CACQ,SAAAC,OAAO,CAAI,CAEfJ,QAAQ,CAAC,CACPC,IAAI,CAAEX,aADC,CAEPe,OAAO,CAAED,OAAO,CAACE,IAFV,CAAD,CAAR,CAIH,CAPD,EAQAR,CAAC,CAACM,OAAO,CAACE,IAAR,CAAaC,MAAf,CAET,CACF,CAzBH,EA2BH,CAjC2B,EAArB,CAmCP,MAAO,IAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,MAAD,QAAY,UAAAX,QAAQ,CAAG,CAC9CA,QAAQ,CAAC,CAAEC,IAAI,CAACR,UAAP,CAAD,CAAR,CAEAE,KAAK,CAAC,CACFiB,MAAM,CAAC,MADL,CAGFC,GAAG,CAAC,2DAHF,CAIFP,IAAI,CAAEK,MAJJ,CAAD,CAAL,CAKGR,IALH,CAKQ,SAAAQ,MAAM,CAAI,CACdH,OAAO,CAACC,GAAR,CAAYE,MAAM,CAACL,IAAnB,EACL,CAPC,EAOCQ,KAPD,CAOO,SAAAC,GAAG,CAAE,CACZP,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,QAAJ,CAAaC,MAAzB,EACAjB,QAAQ,CAACJ,YAAY,CAACmB,GAAG,CAACC,QAAJ,CAAaV,IAAd,CAAoBS,GAAG,CAACC,QAAJ,CAAaC,MAAjC,CAAwC,cAAxC,CAAb,CAAR,CAID,CAbC,EAcD,CAjBwB,EAAlB","sourcesContent":["import { FETCH_REVIEWS, REVIEWS_LOADING, REVIEWS_LOADED, ADD_REVIEW, ERROR_REVIEW } from './types';\r\nimport axios from 'axios';\r\nimport {returnErrors} from './errorActions'\r\n\r\nvar x=0,y;\r\n\r\nexport const fetchReviews = () => dispatch => {\r\n    if(x===0){\r\n      dispatch({ type:REVIEWS_LOADING })\r\n    }\r\n    // console.log(\"actions ke andar\")\r\n    // axios.get('http://localhost:5000/api/fetchReviews')\r\n    axios.get('https://react-native-serverjs.herokuapp.com/api/fetchReviews')\r\n      .then(reviews => {\r\n        if(x===0){\r\n        // console.log(reviews.data)\r\n            dispatch({ type:REVIEWS_LOADED })\r\n            dispatch({\r\n                type:FETCH_REVIEWS,\r\n                payload:reviews.data\r\n            })\r\n            x=1;\r\n            y=reviews.data.length;\r\n        }else if(y !== reviews.data.length){\r\n          console.log(y)\r\n                  // axios.get('http://localhost:5000/api/fetchReviews')\r\n                  axios.get('https://react-native-serverjs.herokuapp.com/api/fetchReviews')\r\n                    .then(reviews => {\r\n                      // dispatch({type:POST_LOADED})\r\n                      dispatch({\r\n                        type: FETCH_REVIEWS,\r\n                        payload: reviews.data\r\n                      })\r\n                  })\r\n                  y=reviews.data.length;\r\n                  // console.log('secound')\r\n        }\r\n      })\r\n      \r\n};\r\n\r\nexport const addReview = (review) => dispatch =>{\r\n  dispatch({ type:ADD_REVIEW })\r\n  // console.log(\"inside post\")\r\n  axios({\r\n      method:'post',\r\n      // url:'http://localhost:5000/api/addReview',\r\n      url:'https://react-native-serverjs.herokuapp.com/api/addReview',\r\n      data: review\r\n  }).then(review => {\r\n      console.log(review.data)\r\n}).catch(err=>{\r\n  console.log(err.response.status)\r\n  dispatch(returnErrors(err.response.data, err.response.status,'ERROR_REVIEW'));\r\n//   dispatch({\r\n//     type:REGESTER_FAIL\r\n// })\r\n})\r\n}\r\n"]},"metadata":{},"sourceType":"module"}